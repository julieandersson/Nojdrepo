@{
    var sub = ViewBag.SubCategoryName as string ?? "Kategori";
    ViewData["Title"] = sub;
}

<div class="breadcrumbs">
    <a href="/">NÖJD.COM</a> / <a asp-controller="Categories" asp-action="Index">KATEGORI</a> / <span>@ViewData["Title"]</span>
</div>

<h1>@ViewData["Title"]</h1>

<div class="categories-images">
    <img src="~/images/well1.png" alt="well 1" />
    <img src="~/images/well2.png" alt="well 2" />
</div>

<h3>@ViewData["Title"] som anpassas efter dina behov</h3>

<p>
    Vi erbjuder well i flera utföranden, anpassade efter dina specifika behov.
    Wellpapplådor passar perfekt för mellanstora till stora produkter som skickas som paket eller på pall.
    De ger bra skydd, är lätta att stapla och enkla att hantera.
    Materialet är flexibelt och kan anpassas i form, storlek och design.
    Wellpapp tillverkas av förnybara råvaror och återvunnet material, med giftfritt, vattenlösligt lim.
    Det är lätt att återvinna och fungerar även som biobränsle med högt energivärde.
</p>

<br />

<div class="products-layout">
    <!-- sidofilter (vänster kolumn på desktop) -->
    <aside id="sidebarFilter" class="sidebar-filter" aria-hidden="true">
        <button type="button" class="filter-close" aria-label="Stäng filter">×</button>
        <h4 class="filter-title">
            <svg class="icon-filter" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                      d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"/>
            </svg>
            Filter
        </h4>
        <!-- aktiva filter/chips -->
        <div class="active-filters" id="activeFilters" hidden>
            <div class="chips" id="chipsContainer"></div>
            <button type="button" id="clearFiltersBtnTop" class="clear-filters-top">Rensa alla filter</button>
        </div>

        <form>
            <!-- Visa -->
            <div class="filter-group">
                <span class="filter-label">Visa:</span>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="showonly" value="all"> Alla</label>
                    <label><input type="checkbox" name="showonly" value="instock"> I lager</label>
                    <label><input type="checkbox" name="showonly" value="news"> Nyheter</label>
                    <label><input type="checkbox" name="showonly" value="campains"> Kampanjer</label>
                </div>
            </div>

            <!-- Bredd -->
            <div class="filter-group">
                <span class="filter-label">Bredd:</span>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="width" value="all"> Alla</label>
                    <label><input type="checkbox" name="width" value="0-200"> 0-200 mm</label>
                    <label><input type="checkbox" name="width" value="200-400"> 200-400 mm</label>
                    <label><input type="checkbox" name="width" value="400+"> 400+ mm</label>
                </div>
            </div>

            <!-- Höjd -->
            <div class="filter-group">
                <span class="filter-label">Höjd:</span>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="height" value="all"> Alla</label>
                    <label><input type="checkbox" name="height" value="0-200"> 0-200 mm</label>
                    <label><input type="checkbox" name="height" value="200-400"> 200-400 mm</label>
                    <label><input type="checkbox" name="height" value="400+"> 400+ mm</label>
                </div>
            </div>
        </form> <br />
        <div class="filter-footer">
            <button type="button" id="clearFiltersBtnBottom" class="clear-filters-bottom">Rensa filter</button>
            <button type="button" class="show-products" aria-label="Stäng filter">Visa produkter</button>
        </div>
    </aside>

    <!-- Högerspalt: toolbar + chips + grid -->
    <div class="products-content">
        <!-- Sortering + vyväljare + filter-knapp -->
        <div class="products-toolbar">
            <div class="sort-controls">
                <label class="sort-label">
                    Sortera efter:
                    <select id="sort-select" class="sort-select">
                        <option value="all">Popularitet</option>
                        <option value="most">Pris, fallande</option>
                        <option value="least">Pris, stigande</option>
                    </select>
                </label>
            </div>

            <div class="searchbar">
                <svg class="search-icon2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M21 21l-4.3-4.3M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"
                          stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <input type="search" id="productSearch" class="search-input" placeholder="Sök i @sub..." aria-label="Sök i @sub">
            </div>

            <div class="toolbar-right">
                <div class="view-toggle" role="group" aria-label="Välj vy">
                    <button type="button" class="view-btn is-active" data-view="grid" aria-label="Gallerivy">
                        <i class="fa-solid fa-grip"></i>
                    </button>
                    <button type="button" class="view-btn" data-view="list" aria-label="Listvy">
                        <i class="fa-solid fa-list"></i>
                    </button>
                </div>

                <!-- Knapp synlig på tablet/mobil, placerad till höger -->
                <button type="button" class="filter-toggle" aria-expanded="false" aria-controls="sidebarFilter">
                    <svg class="icon-filter" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                              d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"/>
                    </svg>
                    Filter
                </button>
            </div>
        </div>

        <!-- Produktgrid -->
        <div class="product-grid">
            @for (int i = 0; i < 9; i++)
            {
                <div class="product-card">
                    <img src="~/images/wellada1.png" alt="well" />
                    <div class="price">Från <span>16,6 kr</span> / st</div>
                    <div class="sale">Nedsatt pris</div>
                    <h3>Wellåda N-82,3</h3>
                    <p>Mått: 570 x 380 x 380/250/180 mm</p>
                    <p>Artikelnr: 300823</p>
                    <p class="in-stock">✔ Finns i lager</p>
                    <p class="shipping"><i class="fa-solid fa-truck-fast"></i> Skickas omgående</p>
                    <label class="variant-label" for="variant-@i">Välj variant:</label>
                    <select id="variant-@i" class="variant-select" aria-label="Välj förpackning">
                        <option value="kolli"   data-qty="20"  data-price="13.35">kolli (20st á 13,35 kr/st)</option>
                        <option value="halvpall" data-qty="480" data-price="8.01">halvpall (480st á 8,01 kr/st)</option>
                        <option value="helpall"  data-qty="960" data-price="5.34">helpall (960st á 5,34 kr/st)</option>
                    </select>
                    <div class="actions">
                        <input type="number" value="1" min="1" />
                        <a asp-controller="Categories"
                           asp-action="SingleProduct"
                           asp-route-subcategory="@ViewBag.SubCategoryName"
                           asp-route-productSlug="wellada-n-82-3"
                           class="buy-btn">
                           <i class="fa-solid fa-cart-shopping"></i> Lägg i varukorg
                        </a>
                    </div>
                </div>
            }
        </div>
    </div>

    <!-- Backdrop för flyout -->
    <div class="filter-backdrop" hidden></div>
</div>